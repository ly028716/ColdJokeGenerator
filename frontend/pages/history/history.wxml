<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="header">
    <text class="header-title">å†å²è®°å½•</text>
  </view>

  <!-- æœç´¢æ¡† -->
  <view class="search-section">
    <view class="search-bar">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢å†å²è®°å½•..." 
        value="{{searchKeyword}}"
        bindinput="onSearchInput" />
    </view>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-number">{{statistics.totalViewed}}</text>
        <text class="stat-label">æ€»æµè§ˆ</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-number">{{statistics.totalFavorited}}</text>
        <text class="stat-label">æ€»æ”¶è—</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-number">{{statistics.todayViewed}}</text>
        <text class="stat-label">ä»Šæ—¥</text>
      </view>
    </view>
  </view>

  <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
  <view class="tabs-section">
    <view class="tabs-container">
      <view 
        class="tab-item {{currentTab === item.id ? 'active' : ''}}"
        wx:for="{{tabs}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="switchTab">
        <text class="tab-icon">{{item.icon}}</text>
        <text class="tab-name">{{item.name}}</text>
      </view>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="tab-actions">
      <view class="action-btn" bindtap="toggleEditMode">
        <text class="action-icon">{{isEditMode ? 'å®Œæˆ' : 'ç¼–è¾‘'}}</text>
      </view>
    </view>
  </view>

  <!-- ç¼–è¾‘æ¨¡å¼å·¥å…·æ  -->
  <view class="edit-toolbar" wx:if="{{isEditMode}}">
    <view class="toolbar-left">
      <view class="select-all-btn" bindtap="toggleSelectAll">
        <text class="select-icon">{{selectedItems.length === getCurrentList().length && getCurrentList().length > 0 ? 'â˜‘ï¸' : 'â˜'}}</text>
        <text class="select-text">å…¨é€‰</text>
      </view>
      <text class="selected-count">å·²é€‰æ‹© {{selectedItems.length}} é¡¹</text>
    </view>
    <view class="toolbar-right">
      <view class="toolbar-btn delete-btn" bindtap="deleteSelectedItems" wx:if="{{selectedItems.length > 0}}">
        <text class="btn-icon">ğŸ—‘ï¸</text>
        <text class="btn-text">åˆ é™¤</text>
      </view>
    </view>
  </view>

  <!-- ç¬‘è¯åˆ—è¡¨ -->
  <view class="content-section">
    <view class="jokes-list" wx:if="{{filteredList.length > 0}}">
      <view 
        class="joke-item {{isEditMode && isItemSelected(item.id) ? 'selected' : ''}}"
        wx:for="{{filteredList}}" 
        wx:key="id">
        
        <!-- é€‰æ‹©æ¡† -->
        <view class="select-checkbox" wx:if="{{isEditMode}}" bindtap="toggleSelectItem" data-joke="{{item}}">
          <text class="checkbox-icon">{{isItemSelected(item.id) ? 'â˜‘ï¸' : 'â˜'}}</text>
        </view>
        
        <!-- ç¬‘è¯å†…å®¹ -->
        <view class="joke-content" bindtap="onJokeClick" data-joke="{{item}}">
          <text class="joke-text">{{item.content}}</text>
          <view class="joke-meta">
            <text class="joke-time">{{currentTab === 0 ? item.viewTime : item.favoriteTime}}</text>
            <text class="joke-category" wx:if="{{item.category}}">{{item.category}}</text>
          </view>
        </view>
        
        <!-- æ“ä½œæŒ‰é’® -->
        <view class="joke-actions" wx:if="{{!isEditMode}}">
          <view class="action-btn" bindtap="onJokeCopy" data-joke="{{item}}">
            <text class="action-icon">ğŸ“‹</text>
          </view>
          <view class="action-btn" bindtap="onJokeFavorite" data-joke="{{item}}">
            <text class="action-icon">{{currentTab === 1 ? 'ğŸ’”' : 'â¤ï¸'}}</text>
          </view>
          <view class="action-btn" bindtap="onJokeShare" data-joke="{{item}}">
            <text class="action-icon">ğŸ“¤</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{filteredList.length === 0 && !isLoading}}">
      <text class="empty-icon">{{tabs[currentTab].icon}}</text>
      <text class="empty-title">{{searchKeyword ? 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å†…å®¹' : 'æš‚æ— ' + tabs[currentTab].name}}</text>
      <text class="empty-desc" wx:if="{{!searchKeyword}}">
        {{currentTab === 0 ? 'æµè§ˆè¿‡çš„ç¬‘è¯ä¼šå‡ºç°åœ¨è¿™é‡Œ' : 'æ”¶è—çš„ç¬‘è¯ä¼šå‡ºç°åœ¨è¿™é‡Œ'}}
      </text>
      <view class="empty-action" wx:if="{{!searchKeyword}}" bindtap="goToIndex">
        <text class="action-text">å»ç”Ÿæˆç¬‘è¯</text>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{isLoading}}">
      <text class="loading-icon">â³</text>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>

</view>